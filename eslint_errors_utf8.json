[{"filePath":"D:\\tiendavirtual\\src\\app\\admin\\customers\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\app\\admin\\inventory\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":135,"column":57,"nodeType":"JSXOpeningElement","endLine":135,"endColumn":146,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\app\\admin\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\app\\admin\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":214,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":214,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8567,8570],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8567,8570],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":303,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":303,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12711,12714],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12711,12714],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":414,"column":57,"nodeType":"JSXOpeningElement","endLine":414,"endColumn":134,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":449,"column":57,"nodeType":"JSXOpeningElement","endLine":449,"endColumn":134,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\app\\admin\\sales\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":398,"column":49,"nodeType":"JSXOpeningElement","endLine":402,"endColumn":51,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":560,"column":57,"nodeType":"JSXOpeningElement","endLine":560,"endColumn":147,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\app\\admin\\settings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\app\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\app\\page.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\tiendavirtual\\src\\app\\page.tsx:35:5\n  33 |\n  34 |   useEffect(() => {\n> 35 |     setIsMounted(true);\n     |     ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  36 |   }, []);\n  37 |\n  38 |   const activeProducts = [...products]","line":35,"column":5,"nodeType":null,"endLine":35,"endColumn":17}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":113,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4193,4196],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4193,4196],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":114,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4284,4287],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4284,4287],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":117,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4401,4404],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4401,4404],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":122,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":122,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4615,4618],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4615,4618],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4701,4704],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4701,4704],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":270,"column":21,"nodeType":"JSXOpeningElement","endLine":274,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":370,"column":21,"nodeType":"JSXOpeningElement","endLine":375,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":416,"column":29,"nodeType":"JSXOpeningElement","endLine":416,"endColumn":92,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":569,"column":15,"nodeType":"JSXOpeningElement","endLine":574,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":610,"column":23,"nodeType":"JSXOpeningElement","endLine":610,"endColumn":86,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { useData } from '@/context/DataContext';\nimport { Product } from '@/lib/types';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  ShoppingBag, ArrowRight, Star, Heart, X,\n  ChevronLeft, ChevronRight, Package, Tag, Truck,\n  MessageCircle, ZoomIn, Instagram, Facebook\n} from 'lucide-react';\nimport ProductTicker from '@/components/ProductTicker';\n\nexport default function Home() {\n  const { products, settings } = useData();\n\n  const CATEGORY_ORDER = [\n    'ROPA PARA DAMAS',\n    'CARTERAS/BILLETERAS',\n    'ACCESORIOS',\n    'CUIDADO PERSONAL',\n    'SALUD',\n    'OTROS'\n  ];\n  const [selectedProduct, setSelectedProduct] = useState<Product | null>(null);\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  const [favorites, setFavorites] = useState<Set<string>>(new Set());\n  const [filterCategory, setFilterCategory] = useState<string>('all');\n  const [lightboxOpen, setLightboxOpen] = useState(false);\n  const [isMounted, setIsMounted] = useState(false);\n\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  const activeProducts = [...products]\n    .filter(p => p.active && p.stock > 0)\n    .sort((a, b) => {\n      const orderA = CATEGORY_ORDER.indexOf(a.category);\n      const orderB = CATEGORY_ORDER.indexOf(b.category);\n      // If category not in list (shouldn't happen), put it at the end\n      const finalA = orderA === -1 ? 999 : orderA;\n      const finalB = orderB === -1 ? 999 : orderB;\n      return finalA - finalB;\n    });\n\n  const filteredProducts = filterCategory === 'all'\n    ? activeProducts\n    : activeProducts.filter(p => p.category === filterCategory);\n\n  const categories = CATEGORY_ORDER.filter(cat => products.some(p => p.category === cat));\n  // Add any other categories that might exist but aren't in the ORDER (precaution)\n  const otherCats = [...new Set(products.map(p => p.category))].filter(cat => !CATEGORY_ORDER.includes(cat));\n  const finalCategories = [...categories, ...otherCats];\n\n  const toggleFavorite = (id: string) => {\n    setFavorites(prev => {\n      const next = new Set(prev);\n      if (next.has(id)) next.delete(id);\n      else next.add(id);\n      return next;\n    });\n  };\n\n  const openProduct = (product: Product) => {\n    setSelectedProduct(product);\n    setCurrentImageIndex(0);\n  };\n\n  const nextImage = () => {\n    if (selectedProduct?.images?.length) {\n      setCurrentImageIndex(prev => (prev + 1) % selectedProduct.images.length);\n    }\n  };\n\n  const prevImage = () => {\n    if (selectedProduct?.images?.length) {\n      setCurrentImageIndex(prev => (prev - 1 + selectedProduct.images.length) % selectedProduct.images.length);\n    }\n  };\n\n  const handleWhatsAppBuy = (product: Product) => {\n    const categoryLabel = product.category;\n    const lines = [\n      `¬°Hola! üëã Estoy interesado/a en el siguiente producto de *Mivis Studio Glam*:`,\n      ``,\n      `üõçÔ∏è *Producto:* ${product.name}`,\n      `üè∑Ô∏è *C√≥digo:* ${product.barcode}`,\n      `üìÇ *Categor√≠a:* ${categoryLabel}`,\n      ...(product.description ? [`üìù *Descripci√≥n:* ${product.description}`] : []),\n      `üí∞ *Precio:* S/ ${product.salePrice.toFixed(2)}`,\n      ``,\n      `¬øEst√° disponible? Me gustar√≠a coordinar la compra y el env√≠o. ¬°Gracias! üôè`,\n    ];\n    const message = encodeURIComponent(lines.join('\\n'));\n    // Ensure the number is cleaned of any non-digits and has the country code\n    let waNumber = (settings?.whatsapp || '51999509661').replace(/\\D/g, '');\n    if (waNumber.length === 9) waNumber = `51${waNumber}`;\n\n    window.open(`https://wa.me/${waNumber}?text=${message}`, '_blank');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white font-sans\">\n      {/* Header */}\n      <header className=\"fixed top-0 left-0 w-full bg-white/80 backdrop-blur-md z-50 border-b border-gray-100\">\n        <div className=\"max-w-7xl mx-auto px-6 h-16 md:h-20 flex items-center justify-between\">\n          <div className=\"flex items-center gap-2 group cursor-pointer\" onClick={() => {\n            // Hidden way to access admin login: triple click the logo\n            const now = Date.now();\n            const lastClick = (window as any)._lastLogoClick || 0; // eslint-disable-line\n            const clickCount = (window as any)._logoClickCount || 0; // eslint-disable-line\n\n            if (now - lastClick < 500) {\n              (window as any)._logoClickCount = clickCount + 1; // eslint-disable-line\n              if (clickCount + 1 >= 3) {\n                window.location.href = '/login';\n              }\n            } else {\n              (window as any)._logoClickCount = 1; // eslint-disable-line\n            }\n            (window as any)._lastLogoClick = now; // eslint-disable-line\n          }}>\n            <div className=\"w-9 h-9 md:w-10 md:h-10 bg-gradient-to-tr from-purple-600 to-pink-500 rounded-xl flex items-center justify-center text-white\">\n              <ShoppingBag size={18} />\n            </div>\n            <span className=\"text-lg md:text-xl font-black bg-clip-text text-transparent bg-gradient-to-r from-purple-600 to-pink-500 uppercase tracking-tighter\">\n              MIVIS STUDIO GLAM\n            </span>\n          </div>\n          <nav className=\"hidden md:flex items-center gap-8 text-sm font-medium text-gray-600\">\n            <Link href=\"#products\" className=\"hover:text-purple-600 transition-colors\">Cat√°logo</Link>\n            <Link href=\"#contact\" className=\"hover:text-purple-600 transition-colors\">Contacto</Link>\n          </nav>\n          {/* Social Icons - Top Right (Mobile-ready) */}\n          <div className=\"flex items-center gap-4 border-l border-gray-100 pl-4 flex-shrink-0\">\n            <a\n              href={settings?.instagram || '#'}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"text-gray-500 hover:text-pink-500 transition-colors p-1\"\n              title=\"Instagram\"\n            >\n              <Instagram size={22} className=\"md:w-[20px] md:h-[20px]\" />\n            </a>\n            {settings?.tiktok && (\n              <a\n                href={settings.tiktok}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-gray-400 hover:text-black transition-colors p-1\"\n                title=\"TikTok\"\n              >\n                <svg viewBox=\"0 0 448 512\" fill=\"currentColor\" width=\"20\" height=\"20\" className=\"md:w-[18px] md:h-[18px]\">\n                  <path d=\"M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z\" />\n                </svg>\n              </a>\n            )}\n            {settings?.facebook && (\n              <a\n                href={settings.facebook}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-gray-500 hover:text-blue-600 transition-colors p-1\"\n                title=\"Facebook\"\n              >\n                <Facebook size={22} className=\"md:w-[20px] md:h-[20px]\" />\n              </a>\n            )}\n          </div>\n        </div>\n      </header>\n\n      {/* Hero */}\n      <section className=\"relative pt-28 pb-16 lg:pt-40 lg:pb-24 overflow-hidden\">\n        <div className=\"absolute top-0 right-0 w-1/3 h-full bg-gradient-to-l from-purple-50 to-transparent -z-10\" />\n        <div className=\"absolute bottom-0 left-0 w-1/4 h-2/3 bg-gradient-to-t from-pink-50 to-transparent -z-10\" />\n        <div className=\"max-w-7xl mx-auto px-6\">\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.8 }}\n            className=\"text-center max-w-3xl mx-auto\"\n          >\n            <span className=\"px-4 py-1.5 rounded-full bg-pink-100 text-pink-600 text-xs font-bold uppercase tracking-wide\">\n              Nueva Colecci√≥n 2026\n            </span>\n            <h1 className=\"mt-6 text-4xl md:text-6xl lg:text-7xl font-bold text-gray-900 leading-tight\">\n              Estilo que{' '}\n              <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-500\">Inspira.</span>\n            </h1>\n            <p className=\"mt-6 text-lg text-gray-600 max-w-xl mx-auto leading-relaxed\">\n              Descubre lo √∫ltimo en moda femenina y cuidado personal. Calidad premium y dise√±os exclusivos pensados para ti.\n            </p>\n            <div className=\"mt-10 flex justify-center gap-4\">\n              <Link href=\"#products\" className=\"px-8 py-4 bg-gray-900 text-white rounded-full font-semibold shadow-xl shadow-gray-200 hover:bg-gray-800 transition-all flex items-center gap-2 group\">\n                Ver Cat√°logo <ArrowRight size={18} className=\"group-hover:translate-x-1 transition-transform\" />\n              </Link>\n            </div>\n          </motion.div>\n        </div>\n      </section >\n\n      {/* Product Highlight Ticker */}\n      <ProductTicker products={activeProducts} onProductClick={openProduct} />\n\n      {/* Products */}\n      {/* Products */}\n      <section id=\"products\" className=\"py-16 md:py-24 bg-gray-50\">\n        <div className=\"max-w-7xl mx-auto px-6\">\n          <div className=\"text-center mb-10 md:mb-16\">\n            <h2 className=\"text-3xl font-bold text-gray-900\">Nuestros Productos</h2>\n            <p className=\"text-gray-500 mt-2\">Encuentra lo que buscas.</p>\n          </div>\n\n          {/* Category Filter */}\n          {finalCategories.length > 1 && (\n            <div className=\"flex justify-center gap-2 mb-10 flex-wrap\">\n              <button\n                onClick={() => setFilterCategory('all')}\n                className={`px-5 py-2 rounded-full text-sm font-medium transition-all ${filterCategory === 'all'\n                  ? 'bg-gray-900 text-white shadow-lg'\n                  : 'bg-white text-gray-600 hover:bg-gray-100 border border-gray-200'\n                  }`}\n              >\n                Todos\n              </button>\n              {finalCategories.map(cat => (\n                <button\n                  key={cat}\n                  onClick={() => setFilterCategory(cat)}\n                  className={`px-5 py-2 rounded-full text-sm font-medium transition-all ${filterCategory === cat\n                    ? 'bg-gray-900 text-white shadow-lg'\n                    : 'bg-white text-gray-600 hover:bg-gray-100 border border-gray-200'\n                    }`}\n                >\n                  {cat}\n                </button>\n              ))}\n            </div>\n          )}\n\n          {/* Product Grid */}\n          <div className=\"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-8\">\n            {filteredProducts.map((product, idx) => (\n              <motion.div\n                key={product.id}\n                initial={{ opacity: 0, y: 20 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ delay: idx * 0.05 }}\n                className=\"group bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-100 cursor-pointer\"\n                onClick={() => openProduct(product)}\n              >\n                {/* Product Image */}\n                <div className=\"relative aspect-[4/5] bg-gray-100 overflow-hidden\">\n                  <div className=\"absolute top-2 right-2 z-10\">\n                    <button\n                      onClick={(e) => { e.stopPropagation(); toggleFavorite(product.id); }}\n                      className=\"p-2 bg-white/80 backdrop-blur-sm rounded-full text-gray-500 hover:text-red-500 hover:bg-white transition-colors shadow-sm\"\n                      aria-label=\"Agregar a favoritos\"\n                    >\n                      <Heart size={16} className={favorites.has(product.id) ? 'fill-red-500 text-red-500' : ''} />\n                    </button>\n                  </div>\n                  {product.images?.[0] ? (\n                    /* eslint-disable-next-line @next/next/no-img-element */\n                    <img\n                      src={product.images[0]}\n                      alt={product.name}\n                      className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\n                    />\n                  ) : (\n                    <div className=\"w-full h-full flex flex-col items-center justify-center bg-gradient-to-br from-purple-50 to-pink-50 text-gray-300 group-hover:scale-105 transition-transform duration-500\">\n                      <Package size={40} />\n                      <span className=\"text-xs mt-2 font-medium\">Sin imagen</span>\n                    </div>\n                  )}\n                  {product.stock < 5 && (\n                    <div className=\"absolute bottom-2 left-2 bg-red-500 text-white text-[10px] font-bold px-2 py-1 rounded-full\">\n                      ¬°√öLTIMAS UNIDADES!\n                    </div>\n                  )}\n                </div>\n\n                {/* Product Info */}\n                <div className=\"p-3 md:p-5\">\n                  <div className=\"flex justify-between items-start mb-1 md:mb-2\">\n                    <h3 className=\"font-bold text-gray-900 group-hover:text-purple-600 transition-colors line-clamp-1 text-sm md:text-base\">\n                      {product.name}\n                    </h3>\n                    <div className=\"hidden md:flex items-center gap-1 text-xs font-bold text-gray-900 bg-gray-100 px-2 py-1 rounded-lg flex-shrink-0 ml-2\">\n                      <Star size={10} className=\"text-yellow-500 fill-yellow-500\" /> 4.9\n                    </div>\n                  </div>\n                  <p className=\"text-xs md:text-sm text-gray-500 line-clamp-2 mb-3 md:mb-4 h-8 md:h-10\">{product.description}</p>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-lg md:text-xl font-bold text-gray-900\">S/ {product.salePrice.toFixed(2)}</span>\n                    <button\n                      onClick={(e) => { e.stopPropagation(); openProduct(product); }}\n                      className=\"p-2 md:p-3 bg-gray-900 text-white rounded-xl hover:bg-purple-600 transition-colors shadow-lg shadow-gray-200\"\n                      aria-label=\"Ver producto\"\n                    >\n                      <ShoppingBag size={16} />\n                    </button>\n                  </div>\n                </div>\n              </motion.div>\n            ))}\n          </div>\n\n          {filteredProducts.length === 0 && (\n            <div className=\"text-center py-20\">\n              <Package size={48} className=\"mx-auto text-gray-300 mb-4\" />\n              <p className=\"text-gray-500 text-lg\">No hay productos disponibles.</p>\n              <p className=\"text-gray-400 text-sm mt-1\">¬°Vuelve pronto!</p>\n            </div>\n          )}\n        </div>\n      </section >\n\n      {/* Contact / Footer */}\n      <section id=\"contact\" className=\"py-16 md:py-20 bg-white\">\n        <div className=\"max-w-7xl mx-auto px-6 text-center\">\n          <h2 className=\"text-2xl md:text-3xl font-bold text-gray-900 mb-4\">¬øTienes preguntas?</h2>\n          <p className=\"text-gray-500 mb-8 max-w-md mx-auto\">Cont√°ctanos por WhatsApp y te atenderemos con gusto.</p>\n          <a\n            href={`https://wa.me/${settings?.whatsapp || '51999509661'}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"inline-flex items-center gap-3 px-8 py-4 bg-green-500 text-white rounded-full font-bold shadow-lg shadow-green-100 hover:bg-green-600 transition-all w-full md:w-auto justify-center\"\n          >\n            <MessageCircle size={22} />\n            Escr√≠benos por WhatsApp ({settings?.whatsapp || '999 509 661'})\n          </a>\n        </div>\n      </section>\n\n      <footer className=\"bg-gray-900 text-white py-8\">\n        <div className=\"max-w-7xl mx-auto px-6 text-center text-sm text-gray-400\">\n          <p>Mivis Studio Glam ¬© {isMounted ? new Date().getFullYear() : ''} ‚Äî Todos los derechos reservados.</p>\n        </div>\n      </footer>\n\n      {/* ===== PRODUCT DETAIL MODAL ===== */}\n      <AnimatePresence>\n        {selectedProduct && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-[100] flex items-end md:items-center justify-center\"\n            onClick={() => setSelectedProduct(null)}\n          >\n            <motion.div\n              initial={{ y: '100%', opacity: 0 }}\n              animate={{ y: 0, opacity: 1 }}\n              exit={{ y: '100%', opacity: 0 }}\n              transition={{ type: 'spring', damping: 25, stiffness: 300 }}\n              onClick={(e) => e.stopPropagation()}\n              className=\"bg-white w-full md:max-w-2xl md:rounded-3xl rounded-t-3xl max-h-[92vh] overflow-y-auto shadow-2xl\"\n            >\n              {/* Image Gallery ‚Äî compact, proportional */}\n              <div className=\"relative h-[180px] md:h-[220px] bg-gray-100 overflow-hidden md:rounded-t-3xl\">\n                {selectedProduct.images?.length > 0 ? (\n                  <>\n                    {/* eslint-disable-next-line @next/next/no-img-element */}\n                    <img\n                      src={selectedProduct.images[currentImageIndex]}\n                      alt={selectedProduct.name}\n                      className=\"w-full h-full object-contain bg-gray-50 cursor-zoom-in\"\n                      onClick={() => setLightboxOpen(true)}\n                    />\n                    {/* Zoom hint */}\n                    <div className=\"absolute bottom-2 right-2 bg-black/40 backdrop-blur-md text-white px-2.5 py-1 rounded-full text-[10px] font-medium flex items-center gap-1 pointer-events-none\">\n                      <ZoomIn size={12} /> Ampliar\n                    </div>\n                    {/* Image counter */}\n                    {selectedProduct.images.length > 1 && (\n                      <div className=\"absolute bottom-2 left-1/2 -translate-x-1/2 flex items-center gap-2 bg-black/40 backdrop-blur-md px-3 py-1 rounded-full\">\n                        <button\n                          onClick={prevImage}\n                          className=\"text-white hover:text-purple-300 transition-colors\"\n                          aria-label=\"Imagen anterior\"\n                        >\n                          <ChevronLeft size={16} />\n                        </button>\n                        <span className=\"text-white text-[10px] font-medium\">\n                          {currentImageIndex + 1} / {selectedProduct.images.length}\n                        </span>\n                        <button\n                          onClick={nextImage}\n                          className=\"text-white hover:text-purple-300 transition-colors\"\n                          aria-label=\"Imagen siguiente\"\n                        >\n                          <ChevronRight size={16} />\n                        </button>\n                      </div>\n                    )}\n                    {/* Thumbnail strip */}\n                    {selectedProduct.images.length > 1 && (\n                      <div className=\"absolute top-2 left-1/2 -translate-x-1/2 flex gap-1\">\n                        {selectedProduct.images.map((img, i) => (\n                          <button\n                            key={i}\n                            onClick={() => setCurrentImageIndex(i)}\n                            className={`w-8 h-8 rounded-md overflow-hidden border-2 transition-all ${i === currentImageIndex\n                              ? 'border-white shadow-lg scale-110'\n                              : 'border-transparent opacity-70 hover:opacity-100'\n                              }`}\n                            aria-label={`Ver imagen ${i + 1}`}\n                          >\n                            {/* eslint-disable-next-line @next/next/no-img-element */}\n                            <img src={img} alt=\"\" className=\"w-full h-full object-cover\" />\n                          </button>\n                        ))}\n                      </div>\n                    )}\n                  </>\n                ) : (\n                  <div className=\"w-full h-full flex flex-col items-center justify-center bg-gradient-to-br from-purple-50 to-pink-50 text-gray-300\">\n                    <Package size={36} />\n                    <span className=\"text-xs mt-2 font-medium\">Sin im√°genes</span>\n                  </div>\n                )}\n\n                {/* Close button */}\n                <button\n                  onClick={() => setSelectedProduct(null)}\n                  className=\"absolute top-4 right-4 p-2 bg-white/80 backdrop-blur-sm rounded-full shadow-lg hover:bg-white transition-colors z-10\"\n                  aria-label=\"Cerrar\"\n                >\n                  <X size={20} className=\"text-gray-700\" />\n                </button>\n\n                {/* Favorite button */}\n                <button\n                  onClick={() => toggleFavorite(selectedProduct.id)}\n                  className=\"absolute top-4 left-4 p-2 bg-white/80 backdrop-blur-sm rounded-full shadow-lg hover:bg-white transition-colors z-10\"\n                  aria-label=\"Favorito\"\n                >\n                  <Heart size={20} className={favorites.has(selectedProduct.id) ? 'fill-red-500 text-red-500' : 'text-gray-700'} />\n                </button>\n              </div>\n\n              {/* Product Info */}\n              <div className=\"p-6 md:p-8 space-y-5\">\n                {/* Category tag */}\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"px-3 py-1 bg-purple-50 text-purple-600 text-xs font-semibold rounded-full flex items-center gap-1\">\n                    <Tag size={12} />\n                    {selectedProduct.category}\n                  </span>\n                  {selectedProduct.stock > 0 && (\n                    <span className=\"px-3 py-1 bg-green-50 text-green-600 text-xs font-semibold rounded-full\">\n                      En stock\n                    </span>\n                  )}\n                </div>\n\n                {/* Name and price */}\n                <div>\n                  <h2 className=\"text-2xl md:text-3xl font-bold text-gray-900\">{selectedProduct.name}</h2>\n                  <div className=\"flex items-baseline gap-3 mt-2\">\n                    <span className=\"text-3xl font-bold text-purple-600\">S/ {selectedProduct.salePrice.toFixed(2)}</span>\n                  </div>\n                </div>\n\n                {/* Rating */}\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"flex items-center\">\n                    {[1, 2, 3, 4, 5].map(star => (\n                      <Star key={star} size={16} className=\"text-yellow-500 fill-yellow-500\" />\n                    ))}\n                  </div>\n                  <span className=\"text-sm text-gray-500 font-medium\">4.9 (Excelente)</span>\n                </div>\n\n                {/* Description */}\n                {selectedProduct.description && (\n                  <div>\n                    <h3 className=\"text-sm font-semibold text-gray-800 mb-2\">Descripci√≥n</h3>\n                    <p className=\"text-gray-600 leading-relaxed\">{selectedProduct.description}</p>\n                  </div>\n                )}\n\n                {/* Features */}\n                <div className=\"grid grid-cols-3 gap-3 py-4 border-y border-gray-100\">\n                  <div className=\"text-center\">\n                    <Truck size={20} className=\"mx-auto text-purple-500 mb-1\" />\n                    <span className=\"text-xs text-gray-600 font-medium\">Env√≠o r√°pido</span>\n                  </div>\n                  <div className=\"text-center\">\n                    <Package size={20} className=\"mx-auto text-purple-500 mb-1\" />\n                    <span className=\"text-xs text-gray-600 font-medium\">Original</span>\n                  </div>\n                  <div className=\"text-center\">\n                    <Star size={20} className=\"mx-auto text-purple-500 mb-1\" />\n                    <span className=\"text-xs text-gray-600 font-medium\">Garant√≠a</span>\n                  </div>\n                </div>\n\n                {/* Availability */}\n                <div className=\"flex items-center gap-2 text-sm\">\n                  <div className={`w-2.5 h-2.5 rounded-full ${selectedProduct.stock > 5 ? 'bg-green-500' : selectedProduct.stock > 0 ? 'bg-orange-500' : 'bg-red-500'}`} />\n                  <span className=\"text-gray-600\">\n                    {selectedProduct.stock > 5\n                      ? 'Disponible'\n                      : selectedProduct.stock > 0\n                        ? `¬°Solo quedan ${selectedProduct.stock}!`\n                        : 'Agotado'}\n                  </span>\n                </div>\n\n                {/* Action Buttons */}\n                <div className=\"flex flex-col gap-3 pt-2\">\n                  <button\n                    onClick={() => handleWhatsAppBuy(selectedProduct)}\n                    className=\"w-full py-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-2xl font-bold shadow-lg shadow-green-200 hover:shadow-xl hover:scale-[1.01] transition-all flex items-center justify-center gap-2 text-lg\"\n                  >\n                    <MessageCircle size={22} />\n                    Comprar por WhatsApp\n                  </button>\n                  <button\n                    onClick={() => setSelectedProduct(null)}\n                    className=\"w-full py-3 bg-gray-100 text-gray-700 rounded-2xl font-medium hover:bg-gray-200 transition-colors\"\n                  >\n                    Seguir viendo\n                  </button>\n                </div>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* ===== FULLSCREEN IMAGE LIGHTBOX ===== */}\n      <AnimatePresence>\n        {(() => {\n          const lbImages = lightboxOpen && selectedProduct ? (selectedProduct.images ?? []) : [];\n          const lbName = selectedProduct?.name ?? '';\n          if (!lightboxOpen || lbImages.length === 0) return null;\n          return (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"fixed inset-0 bg-black z-[200] flex items-center justify-center\"\n              onClick={() => setLightboxOpen(false)}\n            >\n              {/* Close */}\n              <button\n                onClick={() => setLightboxOpen(false)}\n                className=\"absolute top-4 right-4 p-3 bg-white/10 backdrop-blur-md text-white rounded-full hover:bg-white/20 transition-colors z-10\"\n                aria-label=\"Cerrar visor\"\n              >\n                <X size={24} />\n              </button>\n\n              {/* Image counter */}\n              <div className=\"absolute top-4 left-1/2 -translate-x-1/2 bg-white/10 backdrop-blur-md text-white px-4 py-2 rounded-full text-sm font-medium z-10\">\n                {currentImageIndex + 1} / {lbImages.length}\n              </div>\n\n              {/* Main Image */}\n              {/* eslint-disable-next-line @next/next/no-img-element */}\n              <img\n                src={lbImages[currentImageIndex]}\n                alt={lbName}\n                className=\"max-w-[95vw] max-h-[85vh] object-contain rounded-lg\"\n                onClick={(e) => e.stopPropagation()}\n              />\n\n              {/* Navigation */}\n              {lbImages.length > 1 && (\n                <>\n                  <button\n                    onClick={(e) => { e.stopPropagation(); prevImage(); }}\n                    className=\"absolute left-3 top-1/2 -translate-y-1/2 p-3 bg-white/10 backdrop-blur-md text-white rounded-full hover:bg-white/20 transition-colors\"\n                    aria-label=\"Imagen anterior\"\n                  >\n                    <ChevronLeft size={28} />\n                  </button>\n                  <button\n                    onClick={(e) => { e.stopPropagation(); nextImage(); }}\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2 p-3 bg-white/10 backdrop-blur-md text-white rounded-full hover:bg-white/20 transition-colors\"\n                    aria-label=\"Imagen siguiente\"\n                  >\n                    <ChevronRight size={28} />\n                  </button>\n                </>\n              )}\n\n              {/* Thumbnail strip */}\n              {lbImages.length > 1 && (\n                <div className=\"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2\" onClick={(e) => e.stopPropagation()}>\n                  {lbImages.map((img, i) => (\n                    <button\n                      key={i}\n                      onClick={() => setCurrentImageIndex(i)}\n                      className={`w-14 h-14 rounded-xl overflow-hidden border-2 transition-all ${i === currentImageIndex\n                        ? 'border-white shadow-lg scale-110'\n                        : 'border-white/30 opacity-60 hover:opacity-100'\n                        }`}\n                      aria-label={`Ver imagen ${i + 1}`}\n                    >\n                      {/* eslint-disable-next-line @next/next/no-img-element */}\n                      <img src={img} alt=\"\" className=\"w-full h-full object-cover\" />\n                    </button>\n                  ))}\n                </div>\n              )}\n            </motion.div>\n          );\n        })()}\n      </AnimatePresence>\n    </div >\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\components\\AdminSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\components\\ProductModal.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":172,"column":37,"nodeType":"JSXOpeningElement","endLine":172,"endColumn":107}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n'use client';\r\n\r\nimport { useForm } from 'react-hook-form';\r\nimport { Product } from '@/lib/types';\r\nimport { X, Upload, Trash, Image as ImageIcon, Loader2 } from 'lucide-react';\r\nimport { useEffect, useState } from 'react';\r\nimport { compressImage } from '@/lib/imageUtils';\r\n\r\ninterface ProductModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSubmit: (data: Partial<Product>) => void;\r\n    initialData?: Product | null;\r\n}\r\n\r\nexport function ProductModal({ isOpen, onClose, onSubmit, initialData }: ProductModalProps) {\r\n    const { register, handleSubmit, reset, setValue, watch } = useForm();\r\n    const category = watch('category');\r\n\r\n    const [images, setImages] = useState<string[]>([]);\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if (initialData) {\r\n            reset(initialData);\r\n            setImages(initialData.images || []);\r\n        } else {\r\n            reset({\r\n                name: '',\r\n                category: 'ROPA PARA DAMAS',\r\n                costPrice: undefined,\r\n                salePrice: undefined,\r\n                stock: undefined,\r\n                barcode: '',\r\n                description: '',\r\n                active: true,\r\n                images: []\r\n            });\r\n            setImages([]);\r\n        }\r\n    }, [initialData, reset]);\r\n\r\n\r\n\r\n    const [isUploading, setIsUploading] = useState(false);\r\n\r\n    const handleImageUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        setIsUploading(true);\r\n        try {\r\n            const compressed = await compressImage(file);\r\n            const newImages = [...images, compressed];\r\n            setImages(newImages);\r\n            setValue('images', newImages);\r\n        } catch (err) {\r\n            console.error('Image compression error:', err);\r\n        } finally {\r\n            setIsUploading(false);\r\n            // Reset input so same file can be re-selected\r\n            e.target.value = '';\r\n        }\r\n    };\r\n\r\n    const handleRemoveImage = (index: number) => {\r\n        const newImages = images.filter((_, i) => i !== index);\r\n        setImages(newImages);\r\n        setValue('images', newImages);\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200\">\r\n            <div className=\"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl\">\r\n                <div className=\"p-6 border-b border-gray-100 flex justify-between items-center sticky top-0 bg-white z-10\">\r\n                    <h2 className=\"text-xl font-bold text-gray-800\">\r\n                        {initialData ? 'Editar Producto' : 'Nuevo Producto'}\r\n                    </h2>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\" title=\"Cerrar modal\">\r\n                        <X size={20} className=\"text-gray-500\" />\r\n                    </button>\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit(onSubmit)} className=\"p-6 space-y-6\">\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-medium text-gray-700\">Nombre del Producto</label>\r\n                            <input {...register('name', { required: true })} className=\"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none transition-all\" placeholder=\"Ej. Vestido Floral\" />\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-medium text-gray-700\">Categor√≠a</label>\r\n                            <select {...register('category')} className=\"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none transition-all bg-white\">\r\n                                <option value=\"ROPA PARA DAMAS\">ROPA PARA DAMAS</option>\r\n                                <option value=\"ROPA PARA CABALLEROS\">ROPA PARA CABALLEROS</option>\r\n                                <option value=\"ROPA PARA NI√ë@S\">ROPA PARA NI√ë@S</option>\r\n                                <option value=\"CARTERAS/BILLETERAS/MORRALES\">CARTERAS/BILLETERAS/MORRALES</option>\r\n                                <option value=\"ZAPATILLAS\">ZAPATILLAS</option>\r\n                                <option value=\"SANDALIAS/CROCS\">SANDALIAS/CROCS</option>\r\n                                <option value=\"SHAMPOOS\">SHAMPOOS</option>\r\n                                <option value=\"SALUD\">SALUD</option>\r\n                                <option value=\"OTROS\">OTROS</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        {category === 'SHAMPOOS' && (\r\n                            <div className=\"space-y-2 animate-in slide-in-from-top-2\">\r\n                                <label className=\"text-sm font-medium text-gray-700\">Color de Shampoo</label>\r\n                                <select {...register('color')} className=\"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none transition-all bg-white\">\r\n                                    <option value=\"Rojo\">Rojo</option>\r\n                                    <option value=\"Azul\">Azul</option>\r\n                                    <option value=\"Verde\">Verde</option>\r\n                                    <option value=\"Amarillo\">Amarillo</option>\r\n                                    <option value=\"Naranja\">Naranja</option>\r\n                                </select>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-medium text-gray-700\">Stock Inicial</label>\r\n                            <input type=\"number\" {...register('stock', { valueAsNumber: true })} className=\"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none transition-all\" />\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-medium text-gray-700\">Precio de Costo (S/)</label>\r\n                            <input type=\"number\" step=\"0.01\" {...register('costPrice', { valueAsNumber: true })} className=\"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none transition-all\" />\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-medium text-gray-700\">Precio de Venta (S/)</label>\r\n                            <input type=\"number\" step=\"0.01\" {...register('salePrice', { valueAsNumber: true })} className=\"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none transition-all\" />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-sm font-medium text-gray-700\">Descripci√≥n</label>\r\n                        <textarea {...register('description')} rows={3} className=\"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none transition-all\" placeholder=\"Detalles del producto...\" />\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-sm font-medium text-gray-700\">Im√°genes</label>\r\n                        <div className=\"flex gap-2 items-center\">\r\n                            <label className=\"flex-1 cursor-pointer flex items-center justify-center p-3 border-2 border-dashed border-gray-300 rounded-xl hover:bg-gray-50 hover:border-purple-500 transition-colors group\">\r\n                                <div className=\"text-center\">\r\n                                    {isUploading ? (\r\n                                        <>\r\n                                            <Loader2 className=\"mx-auto w-8 h-8 text-purple-500 animate-spin\" />\r\n                                            <span className=\"text-xs text-purple-500 mt-1 block\">Comprimiendo...</span>\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            <Upload className=\"mx-auto w-8 h-8 text-gray-400 group-hover:text-purple-500\" />\r\n                                            <span className=\"text-xs text-gray-500 mt-1 block\">Subir imagen</span>\r\n                                        </>\r\n                                    )}\r\n                                </div>\r\n                                <input type=\"file\" accept=\"image/*\" className=\"hidden\" onChange={handleImageUpload} disabled={isUploading} />\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"flex flex-wrap gap-2 mt-2\">\r\n                            {images.length === 0 && (\r\n                                <div className=\"w-20 h-20 bg-gray-50 rounded-lg flex items-center justify-center text-gray-300 border border-gray-200\">\r\n                                    <ImageIcon size={24} />\r\n                                </div>\r\n                            )}\r\n                            {images.map((img, idx) => (\r\n                                <div key={idx} className=\"relative w-20 h-20 bg-gray-100 rounded-lg overflow-hidden group border border-gray-200 shadow-sm\">\r\n                                    <img src={img} alt=\"Product\" className=\"w-full h-full object-cover\" />\r\n                                    <button type=\"button\" onClick={() => handleRemoveImage(idx)} className=\"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-white\" title=\"Eliminar imagen\">\r\n                                        <Trash size={16} />\r\n                                    </button>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex justify-end gap-3 pt-4 border-t border-gray-100\">\r\n                        <button type=\"button\" onClick={onClose} className=\"px-6 py-2 border border-gray-200 rounded-xl text-gray-600 hover:bg-gray-50 font-medium transition-colors\">Cancelar</button>\r\n                        <button type=\"submit\" className=\"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl font-medium shadow-lg shadow-purple-200 hover:shadow-xl dark:shadow-none hover:scale-105 transition-all\">\r\n                            {initialData ? 'Guardar Cambios' : 'Crear Producto'}\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\components\\ProductTicker.tsx","messages":[],"suppressedMessages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":48,"column":37,"nodeType":"JSXOpeningElement","endLine":52,"endColumn":39,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\context\\AuthContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\context\\DataContext.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'id' is assigned a value but never used.","line":245,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":245,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'id' is assigned a value but never used.","line":275,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":275,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\context\\UIContext.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\tiendavirtual\\src\\context\\UIContext.tsx:20:31\n  18 |     useEffect(() => {\n  19 |         const saved = localStorage.getItem('sidebarCollapsed');\n> 20 |         if (saved === 'true') setIsSidebarCollapsed(true);\n     |                               ^^^^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  21 |     }, []);\n  22 |\n  23 |     const toggleSidebar = () => {","line":20,"column":31,"nodeType":null,"endLine":20,"endColumn":52}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n'use client';\r\n\r\nimport React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\ninterface UIContextType {\r\n    isSidebarCollapsed: boolean;\r\n    toggleSidebar: () => void;\r\n    setSidebarCollapsed: (collapsed: boolean) => void;\r\n}\r\n\r\nconst UIContext = createContext<UIContextType | undefined>(undefined);\r\n\r\nexport const UIProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n    const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\r\n\r\n    // Persist preference\r\n    useEffect(() => {\r\n        const saved = localStorage.getItem('sidebarCollapsed');\r\n        if (saved === 'true') setIsSidebarCollapsed(true);\r\n    }, []);\r\n\r\n    const toggleSidebar = () => {\r\n        setIsSidebarCollapsed(prev => {\r\n            const newValue = !prev;\r\n            localStorage.setItem('sidebarCollapsed', String(newValue));\r\n            return newValue;\r\n        });\r\n    };\r\n\r\n    const setSidebarCollapsed = (collapsed: boolean) => {\r\n        setIsSidebarCollapsed(collapsed);\r\n        localStorage.setItem('sidebarCollapsed', String(collapsed));\r\n    };\r\n\r\n    return (\r\n        <UIContext.Provider value={{ isSidebarCollapsed, toggleSidebar, setSidebarCollapsed }}>\r\n            {children}\r\n        </UIContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useUI = () => {\r\n    const context = useContext(UIContext);\r\n    if (!context) throw new Error('useUI must be used within a UIProvider');\r\n    return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\lib\\firebase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\lib\\imageUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\lib\\mockData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\lib\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\tiendavirtual\\src\\types\\html5-qrcode.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
